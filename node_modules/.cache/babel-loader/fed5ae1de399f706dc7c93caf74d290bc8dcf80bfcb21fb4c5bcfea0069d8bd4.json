{"ast":null,"code":"import _objectSpread from\"/Users/leo/Desktop/gratitude-diary/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useRef,useState}from\"react\";import html2pdf from\"html2pdf.js\";/* ===== Utilità data ===== */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function todayISO(){const d=new Date();const off=d.getTimezoneOffset();const d2=new Date(d.getTime()-off*60*1000);return d2.toISOString().slice(0,10);// YYYY-MM-DD\n}function formatIT(iso){const[y,m,d]=iso.split(\"-\");const date=new Date(Number(y),Number(m)-1,Number(d));return date.toLocaleDateString(\"it-IT\",{day:\"2-digit\",month:\"short\",year:\"numeric\"});}const STORAGE_KEY=\"gratitudeDiaryV1\";export default function App(){var _answers$qIndex;/* ===== Stato principale ===== */const[step,setStep]=useState(\"date\");// 'date' | 'questions' | 'review' | 'history'\nconst[selectedDate,setSelectedDate]=useState(todayISO());const questions=useMemo(()=>[{id:1,icon:\"❤️\",text:\"Ripensando alla giornata di oggi, elenca le cose per cui essere grato.\",placeholder:\"Scrivi qui le cose di cui sei grato...\"},{id:2,icon:\"💡\",text:\"Che cosa hai imparato oggi? Piccole o grandi lezioni vanno benissimo.\",placeholder:\"Scrivi qui quello che hai imparato...\"},{id:3,icon:\"⭐\",text:\"Fai un elenco delle qualità o azioni di cui vai fiero di te stesso.\",placeholder:\"Scrivi qui le tue qualità o azioni positive...\"},{id:4,icon:\"🏅\",text:\"Quali sono le cose di cui sei orgoglioso oggi?\",placeholder:\"Scrivi qui i tuoi successi o traguardi...\"}],[]);const[answers,setAnswers]=useState(Array(4).fill(\"\"));const[qIndex,setQIndex]=useState(0);const[savedToday,setSavedToday]=useState(false);// storico: { [dateISO]: { answers: string[], savedAt:number } }\nconst[diary,setDiary]=useState({});/* ===== Carica/salva archivio ===== */useEffect(()=>{try{const raw=localStorage.getItem(STORAGE_KEY);if(raw)setDiary(JSON.parse(raw));}catch(_unused){}},[]);useEffect(()=>{localStorage.setItem(STORAGE_KEY,JSON.stringify(diary));},[diary]);// quando cambio data carico eventuali risposte salvate\nuseEffect(()=>{var _diary$selectedDate$a,_diary$selectedDate;const existing=(_diary$selectedDate$a=(_diary$selectedDate=diary[selectedDate])===null||_diary$selectedDate===void 0?void 0:_diary$selectedDate.answers)!==null&&_diary$selectedDate$a!==void 0?_diary$selectedDate$a:Array(4).fill(\"\");setAnswers(existing);setSavedToday(Boolean(diary[selectedDate]));},[selectedDate]);// eslint-disable-line react-hooks/exhaustive-deps\n/* ===== Navigazione domande ===== */const canNext=((_answers$qIndex=answers[qIndex])!==null&&_answers$qIndex!==void 0?_answers$qIndex:\"\").trim().length>0;const goNext=()=>{if(!canNext)return;if(qIndex<questions.length-1)setQIndex(i=>i+1);else setStep(\"review\");};const goPrev=()=>{if(qIndex>0)setQIndex(i=>i-1);else setStep(\"date\");};// Swipe mobile: sinistra = avanti (se compilato), destra = indietro\nconst touchStartX=useRef(null);const onTouchStart=e=>touchStartX.current=e.touches[0].clientX;const onTouchEnd=e=>{if(touchStartX.current==null)return;const dx=e.changedTouches[0].clientX-touchStartX.current;if(dx<-50&&canNext)goNext();if(dx>50)goPrev();touchStartX.current=null;};/* ===== FIX tastiera mobile =====\n     ref dichiarato QUI (fuori da qualsiasi if) per rispettare le regole degli hook */const textRef=useRef(null);/* ===== Salvataggio del giorno ===== */const registerToday=()=>{const clean=answers.map(a=>a.trim());const any=clean.some(a=>a.length>0);if(!any)return;setDiary(prev=>_objectSpread(_objectSpread({},prev),{},{[selectedDate]:{answers:clean,savedAt:Date.now()}}));setSavedToday(true);};/* ===== PDF (data grassetto, domande corsivo, risposte normali) ===== */const exportPDF=()=>{const container=document.createElement(\"div\");container.style.padding=\"18px\";container.style.fontFamily=\"Inter, system-ui, -apple-system, sans-serif\";container.style.color=\"#111827\";container.style.lineHeight=\"1.5\";const title=document.createElement(\"div\");title.innerHTML=\"<div style=\\\"font-weight:700;font-size:18px;margin-bottom:10px;\\\">\\n      Diario \\u2013 <span>\".concat(formatIT(selectedDate),\"</span>\\n    </div>\");container.appendChild(title);questions.forEach((q,i)=>{const block=document.createElement(\"div\");block.innerHTML=\"\\n        <div style=\\\"font-style:italic;margin:8px 0 2px 0;\\\">\\n          \".concat(q.text,\"\\n        </div>\\n        <div style=\\\"white-space:pre-wrap;margin:0 0 8px 0;\\\">\\n          \").concat(answers[i]||\"\",\"\\n        </div>\");container.appendChild(block);});const opt={margin:10,filename:\"Diario_\".concat(selectedDate,\".pdf\"),image:{type:\"jpeg\",quality:0.98},html2canvas:{scale:2},jsPDF:{unit:\"mm\",format:\"a4\",orientation:\"portrait\"}};html2pdf().from(container).set(opt).save();};/* ===== Wrapper layout caldo/centrato ===== */const Wrapper=_ref=>{let{children}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-b from-yellow-50 to-yellow-100 flex flex-col items-center px-4 py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full max-w-md\",children:children})});};/* ========== STEP: Data ========== */if(step===\"date\"){return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 mb-2\",children:\"Diario della Gratitudine \\uD83C\\uDF1E\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-base\",children:\"Imposta la data e inizia. Una domanda alla volta, con riepilogo finale.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-sm bg-white rounded-2xl shadow-md p-6 flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-700 mb-3 text-center\",children:\"Seleziona la data del tuo diario\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex justify-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDate,onChange:e=>setSelectedDate(e.target.value),className:\"w-full max-w-xs text-center border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-orange-400\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setQIndex(0);setStep(\"questions\");},className:\"mt-4 w-full bg-orange-500 hover:bg-orange-600 text-white text-lg font-semibold py-2 rounded-lg transition\",children:\"Inizia\"}),diary[selectedDate]&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-3 text-center\",children:[\"Hai gi\\xE0 risposte salvate per \",formatIT(selectedDate),\". Puoi aggiornarle.\"]})]})})]});}/* ========== STEP: Domande (una alla volta) ========== */if(step===\"questions\"){const q=questions[qIndex];return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 italic\",children:\"Scorri a sinistra o premi \\u201CAvanti\\u201D per passare alla domanda successiva\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:formatIT(selectedDate)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-md p-5\",onTouchStart:onTouchStart,onTouchEnd:onTouchEnd,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center text-center mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl mb-2\",children:q.icon}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-gray-800 text-base font-semibold leading-snug max-w-sm\",children:q.text})]}),/*#__PURE__*/_jsx(\"textarea\",{ref:textRef,defaultValue:answers[qIndex],onInput:e=>{// aggiorna solo la variabile locale, non lo stato → niente re-render\nanswers[qIndex]=e.target.value;},onBlur:e=>{// salva quando esci dal campo\nconst newAnswers=[...answers];newAnswers[qIndex]=e.target.value;setAnswers(newAnswers);},onFocus:()=>{// su iPhone serve un piccolo ritardo per mantenere visibilità\nsetTimeout(()=>{var _textRef$current;(_textRef$current=textRef.current)===null||_textRef$current===void 0?void 0:_textRef$current.scrollIntoView({behavior:\"smooth\",block:\"center\"});window.scrollBy(0,-60);// piccolo offset per evitare che la tastiera copra il campo\n},300);},inputMode:\"text\",autoCorrect:\"on\",spellCheck:\"true\",autoCapitalize:\"sentences\",placeholder:q.placeholder,className:\"w-full h-32 p-3 border border-gray-300 rounded-xl text-gray-700 text-base resize-none shadow-sm focus:outline-none focus:ring-2 focus:ring-yellow-400\"},qIndex),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between gap-3 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:goPrev,className:\"w-1/2 bg-gray-100 text-gray-800 py-2 rounded-lg border border-gray-300 hover:bg-gray-200 transition\",children:\"Indietro\"}),/*#__PURE__*/_jsx(\"button\",{onClick:goNext,disabled:!canNext,className:\"w-1/2 py-2 rounded-lg transition \"+(canNext?\"bg-yellow-500 text-white hover:bg-yellow-600\":\"bg-yellow-200 text-white cursor-not-allowed\"),children:qIndex<questions.length-1?\"Avanti\":\"Riepilogo\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-xs text-gray-400 mt-3\",children:[\"Domanda \",qIndex+1,\" di \",questions.length]})]})]});}/* ========== STEP: Riepilogo (modificabile) ========== */if(step===\"review\"){const allFilled=answers.every(a=>a.trim().length>0);return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:[\"Riepilogo \\u2013 \",formatIT(selectedDate)]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Modifica liberamente prima di registrare.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-4\",children:questions.map((q,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-sm p-4 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"italic text-gray-700 mb-2\",children:q.text}),/*#__PURE__*/_jsx(\"textarea\",{defaultValue:answers[i],onBlur:e=>{const a=[...answers];a[i]=e.target.value;setAnswers(a);},className:\"w-full h-24 p-3 border border-gray-300 rounded-xl text-gray-800 text-base resize-none focus:outline-none focus:ring-2 focus:ring-yellow-400\"})]},q.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStep(\"questions\"),className:\"w-full sm:w-1/3 bg-gray-100 text-gray-800 py-2 rounded-lg border border-gray-300 hover:bg-gray-200 transition\",children:\"Torna alle domande\"}),/*#__PURE__*/_jsx(\"button\",{onClick:registerToday,disabled:!allFilled,className:\"w-full sm:w-2/3 py-2 rounded-lg transition \"+(allFilled?\"bg-yellow-500 text-white hover:bg-yellow-600\":\"bg-yellow-200 text-white cursor-not-allowed\"),children:\"Registra risposte\"})]}),savedToday&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-white rounded-2xl shadow-sm p-4 border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-700 font-medium mb-3\",children:[\"\\u2705 Risposte registrate per \",formatIT(selectedDate),\".\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStep(\"history\"),className:\"w-full sm:w-1/2 bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg transition\",children:\"Il mio diario\"}),/*#__PURE__*/_jsx(\"button\",{onClick:exportPDF,className:\"w-full sm:w-1/2 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition\",children:\"Esporta in PDF\"})]})]})]});}/* ========== STEP: Storico ========== */if(step===\"history\"){const dates=Object.keys(diary).sort((a,b)=>a<b?1:-1);return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-6\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"Il mio diario\"})}),dates.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500\",children:\"Non hai ancora registrato nulla.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-4\",children:dates.map(d=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-sm p-4 border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-900 mb-2\",children:formatIT(d)}),diary[d].answers.map((ans,i)=>{var _questions$i;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"italic text-gray-700 text-sm\",children:(_questions$i=questions[i])===null||_questions$i===void 0?void 0:_questions$i.text}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800 whitespace-pre-wrap\",children:ans})]},i);}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedDate(d);setAnswers(diary[d].answers);setSavedToday(true);setStep(\"review\");},className:\"flex-1 bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded-lg transition\",children:\"Apri e modifica\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedDate(d);setAnswers(diary[d].answers);exportPDF();},className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition\",children:\"PDF\"})]})]},d))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStep(\"date\"),className:\"w-full mt-6 bg-gray-100 text-gray-800 py-2 rounded-lg border border-gray-300 hover:bg-gray-200 transition\",children:\"Torna alla data\"})]});}return null;}","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","html2pdf","jsx","_jsx","jsxs","_jsxs","todayISO","d","Date","off","getTimezoneOffset","d2","getTime","toISOString","slice","formatIT","iso","y","m","split","date","Number","toLocaleDateString","day","month","year","STORAGE_KEY","App","_answers$qIndex","step","setStep","selectedDate","setSelectedDate","questions","id","icon","text","placeholder","answers","setAnswers","Array","fill","qIndex","setQIndex","savedToday","setSavedToday","diary","setDiary","raw","localStorage","getItem","JSON","parse","_unused","setItem","stringify","_diary$selectedDate$a","_diary$selectedDate","existing","Boolean","canNext","trim","length","goNext","i","goPrev","touchStartX","onTouchStart","e","current","touches","clientX","onTouchEnd","dx","changedTouches","textRef","registerToday","clean","map","a","any","some","prev","_objectSpread","savedAt","now","exportPDF","container","document","createElement","style","padding","fontFamily","color","lineHeight","title","innerHTML","concat","appendChild","forEach","q","block","opt","margin","filename","image","type","quality","html2canvas","scale","jsPDF","unit","format","orientation","from","set","save","Wrapper","_ref","children","className","value","onChange","target","onClick","ref","defaultValue","onInput","onBlur","newAnswers","onFocus","setTimeout","_textRef$current","scrollIntoView","behavior","window","scrollBy","inputMode","autoCorrect","spellCheck","autoCapitalize","disabled","allFilled","every","dates","Object","keys","sort","b","ans","_questions$i"],"sources":["/Users/leo/Desktop/gratitude-diary/src/App.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport html2pdf from \"html2pdf.js\";\n\n/* ===== Utilità data ===== */\nfunction todayISO() {\n  const d = new Date();\n  const off = d.getTimezoneOffset();\n  const d2 = new Date(d.getTime() - off * 60 * 1000);\n  return d2.toISOString().slice(0, 10); // YYYY-MM-DD\n}\nfunction formatIT(iso) {\n  const [y, m, d] = iso.split(\"-\");\n  const date = new Date(Number(y), Number(m) - 1, Number(d));\n  return date.toLocaleDateString(\"it-IT\", {\n    day: \"2-digit\",\n    month: \"short\",\n    year: \"numeric\",\n  });\n}\n\nconst STORAGE_KEY = \"gratitudeDiaryV1\";\n\nexport default function App() {\n  /* ===== Stato principale ===== */\n  const [step, setStep] = useState(\"date\"); // 'date' | 'questions' | 'review' | 'history'\n  const [selectedDate, setSelectedDate] = useState(todayISO());\n  const questions = useMemo(\n    () => [\n      {\n        id: 1,\n        icon: \"❤️\",\n        text:\n          \"Ripensando alla giornata di oggi, elenca le cose per cui essere grato.\",\n        placeholder: \"Scrivi qui le cose di cui sei grato...\",\n      },\n      {\n        id: 2,\n        icon: \"💡\",\n        text:\n          \"Che cosa hai imparato oggi? Piccole o grandi lezioni vanno benissimo.\",\n        placeholder: \"Scrivi qui quello che hai imparato...\",\n      },\n      {\n        id: 3,\n        icon: \"⭐\",\n        text:\n          \"Fai un elenco delle qualità o azioni di cui vai fiero di te stesso.\",\n        placeholder: \"Scrivi qui le tue qualità o azioni positive...\",\n      },\n      {\n        id: 4,\n        icon: \"🏅\",\n        text: \"Quali sono le cose di cui sei orgoglioso oggi?\",\n        placeholder: \"Scrivi qui i tuoi successi o traguardi...\",\n      },\n    ],\n    []\n  );\n  const [answers, setAnswers] = useState(Array(4).fill(\"\"));\n  const [qIndex, setQIndex] = useState(0);\n  const [savedToday, setSavedToday] = useState(false);\n\n  // storico: { [dateISO]: { answers: string[], savedAt:number } }\n  const [diary, setDiary] = useState({});\n\n  /* ===== Carica/salva archivio ===== */\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem(STORAGE_KEY);\n      if (raw) setDiary(JSON.parse(raw));\n    } catch {}\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(diary));\n  }, [diary]);\n\n  // quando cambio data carico eventuali risposte salvate\n  useEffect(() => {\n    const existing = diary[selectedDate]?.answers ?? Array(4).fill(\"\");\n    setAnswers(existing);\n    setSavedToday(Boolean(diary[selectedDate]));\n  }, [selectedDate]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  /* ===== Navigazione domande ===== */\n  const canNext = (answers[qIndex] ?? \"\").trim().length > 0;\n\n  const goNext = () => {\n    if (!canNext) return;\n    if (qIndex < questions.length - 1) setQIndex((i) => i + 1);\n    else setStep(\"review\");\n  };\n  const goPrev = () => {\n    if (qIndex > 0) setQIndex((i) => i - 1);\n    else setStep(\"date\");\n  };\n\n  // Swipe mobile: sinistra = avanti (se compilato), destra = indietro\n  const touchStartX = useRef(null);\n  const onTouchStart = (e) => (touchStartX.current = e.touches[0].clientX);\n  const onTouchEnd = (e) => {\n    if (touchStartX.current == null) return;\n    const dx = e.changedTouches[0].clientX - touchStartX.current;\n    if (dx < -50 && canNext) goNext();\n    if (dx > 50) goPrev();\n    touchStartX.current = null;\n  };\n\n  /* ===== FIX tastiera mobile =====\n     ref dichiarato QUI (fuori da qualsiasi if) per rispettare le regole degli hook */\n  const textRef = useRef(null);\n\n  /* ===== Salvataggio del giorno ===== */\n  const registerToday = () => {\n    const clean = answers.map((a) => a.trim());\n    const any = clean.some((a) => a.length > 0);\n    if (!any) return;\n    setDiary((prev) => ({\n      ...prev,\n      [selectedDate]: { answers: clean, savedAt: Date.now() },\n    }));\n    setSavedToday(true);\n  };\n\n  /* ===== PDF (data grassetto, domande corsivo, risposte normali) ===== */\n  const exportPDF = () => {\n    const container = document.createElement(\"div\");\n    container.style.padding = \"18px\";\n    container.style.fontFamily = \"Inter, system-ui, -apple-system, sans-serif\";\n    container.style.color = \"#111827\";\n    container.style.lineHeight = \"1.5\";\n\n    const title = document.createElement(\"div\");\n    title.innerHTML = `<div style=\"font-weight:700;font-size:18px;margin-bottom:10px;\">\n      Diario – <span>${formatIT(selectedDate)}</span>\n    </div>`;\n    container.appendChild(title);\n\n    questions.forEach((q, i) => {\n      const block = document.createElement(\"div\");\n      block.innerHTML = `\n        <div style=\"font-style:italic;margin:8px 0 2px 0;\">\n          ${q.text}\n        </div>\n        <div style=\"white-space:pre-wrap;margin:0 0 8px 0;\">\n          ${answers[i] || \"\"}\n        </div>`;\n      container.appendChild(block);\n    });\n\n    const opt = {\n      margin: 10,\n      filename: `Diario_${selectedDate}.pdf`,\n      image: { type: \"jpeg\", quality: 0.98 },\n      html2canvas: { scale: 2 },\n      jsPDF: { unit: \"mm\", format: \"a4\", orientation: \"portrait\" },\n    };\n    html2pdf().from(container).set(opt).save();\n  };\n\n  /* ===== Wrapper layout caldo/centrato ===== */\n  const Wrapper = ({ children }) => (\n    <div className=\"min-h-screen bg-gradient-to-b from-yellow-50 to-yellow-100 flex flex-col items-center px-4 py-8\">\n      <div className=\"w-full max-w-md\">{children}</div>\n    </div>\n  );\n\n  /* ========== STEP: Data ========== */\n  if (step === \"date\") {\n    return (\n      <Wrapper>\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">\n            Diario della Gratitudine 🌞\n          </h1>\n          <p className=\"text-gray-600 text-base\">\n            Imposta la data e inizia. Una domanda alla volta, con riepilogo finale.\n          </p>\n        </div>\n\n        {/* card bianca + input data grigio PERFETTAMENTE centrato */}\n        <div className=\"w-full flex justify-center\">\n          <div className=\"w-full max-w-sm bg-white rounded-2xl shadow-md p-6 flex flex-col items-center\">\n            <h2 className=\"text-lg font-semibold text-gray-700 mb-3 text-center\">\n              Seleziona la data del tuo diario\n            </h2>\n            <div className=\"w-full flex justify-center\">\n              <input\n                type=\"date\"\n                value={selectedDate}\n                onChange={(e) => setSelectedDate(e.target.value)}\n                className=\"w-full max-w-xs text-center border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-orange-400\"\n              />\n            </div>\n\n            <button\n              onClick={() => {\n                setQIndex(0);\n                setStep(\"questions\");\n              }}\n              className=\"mt-4 w-full bg-orange-500 hover:bg-orange-600 text-white text-lg font-semibold py-2 rounded-lg transition\"\n            >\n              Inizia\n            </button>\n\n            {diary[selectedDate] && (\n              <p className=\"text-xs text-gray-500 mt-3 text-center\">\n                Hai già risposte salvate per {formatIT(selectedDate)}. Puoi aggiornarle.\n              </p>\n            )}\n          </div>\n        </div>\n      </Wrapper>\n    );\n  }\n\n  /* ========== STEP: Domande (una alla volta) ========== */\n  if (step === \"questions\") {\n    const q = questions[qIndex];\n\n    return (\n      <Wrapper>\n        <div className=\"text-center mb-3\">\n          <p className=\"text-sm text-gray-500 italic\">\n            Scorri a sinistra o premi “Avanti” per passare alla domanda successiva\n          </p>\n          <p className=\"text-xs text-gray-500\">{formatIT(selectedDate)}</p>\n        </div>\n\n        <div\n          className=\"bg-white rounded-2xl shadow-md p-5\"\n          onTouchStart={onTouchStart}\n          onTouchEnd={onTouchEnd}\n        >\n          <div className=\"flex flex-col items-center text-center mb-4\">\n            <div className=\"text-3xl mb-2\">{q.icon}</div>\n            <h2 className=\"text-gray-800 text-base font-semibold leading-snug max-w-sm\">\n              {q.text}\n            </h2>\n          </div>\n\n          <textarea\n            key={qIndex}\n            ref={textRef}\n            defaultValue={answers[qIndex]}\n            onInput={(e) => {\n              // aggiorna solo la variabile locale, non lo stato → niente re-render\n              answers[qIndex] = e.target.value;\n            }}\n            onBlur={(e) => {\n              // salva quando esci dal campo\n              const newAnswers = [...answers];\n              newAnswers[qIndex] = e.target.value;\n              setAnswers(newAnswers);\n            }}\n            onFocus={() => {\n              // su iPhone serve un piccolo ritardo per mantenere visibilità\n              setTimeout(() => {\n                textRef.current?.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n                window.scrollBy(0, -60); // piccolo offset per evitare che la tastiera copra il campo\n              }, 300);\n            }}\n            inputMode=\"text\"\n            autoCorrect=\"on\"\n            spellCheck=\"true\"\n            autoCapitalize=\"sentences\"\n            placeholder={q.placeholder}\n            className=\"w-full h-32 p-3 border border-gray-300 rounded-xl text-gray-700 text-base resize-none shadow-sm focus:outline-none focus:ring-2 focus:ring-yellow-400\"\n          />\n\n\n          <div className=\"flex items-center justify-between gap-3 mt-4\">\n            <button\n              onClick={goPrev}\n              className=\"w-1/2 bg-gray-100 text-gray-800 py-2 rounded-lg border border-gray-300 hover:bg-gray-200 transition\"\n            >\n              Indietro\n            </button>\n            <button\n              onClick={goNext}\n              disabled={!canNext}\n              className={\n                \"w-1/2 py-2 rounded-lg transition \" +\n                (canNext\n                  ? \"bg-yellow-500 text-white hover:bg-yellow-600\"\n                  : \"bg-yellow-200 text-white cursor-not-allowed\")\n              }\n            >\n              {qIndex < questions.length - 1 ? \"Avanti\" : \"Riepilogo\"}\n            </button>\n          </div>\n\n          <p className=\"text-center text-xs text-gray-400 mt-3\">\n            Domanda {qIndex + 1} di {questions.length}\n          </p>\n        </div>\n      </Wrapper>\n    );\n  }\n\n  /* ========== STEP: Riepilogo (modificabile) ========== */\n  if (step === \"review\") {\n    const allFilled = answers.every((a) => a.trim().length > 0);\n\n    return (\n      <Wrapper>\n        <div className=\"text-center mb-6\">\n          <h2 className=\"text-2xl font-bold text-gray-800\">\n            Riepilogo – {formatIT(selectedDate)}\n          </h2>\n          <p className=\"text-sm text-gray-500\">\n            Modifica liberamente prima di registrare.\n          </p>\n        </div>\n\n        <div className=\"flex flex-col gap-4\">\n          {questions.map((q, i) => (\n            <div key={q.id} className=\"bg-white rounded-2xl shadow-sm p-4 border border-gray-200\">\n              <p className=\"italic text-gray-700 mb-2\">{q.text}</p>\n              <textarea\n                defaultValue={answers[i]}\n                onBlur={(e) => {\n                  const a = [...answers];\n                  a[i] = e.target.value;\n                  setAnswers(a);\n                }}\n                className=\"w-full h-24 p-3 border border-gray-300 rounded-xl text-gray-800 text-base resize-none focus:outline-none focus:ring-2 focus:ring-yellow-400\"\n              />\n            </div>\n          ))}\n        </div>\n\n        <div className=\"flex flex-col sm:flex-row gap-3 mt-6\">\n          <button\n            onClick={() => setStep(\"questions\")}\n            className=\"w-full sm:w-1/3 bg-gray-100 text-gray-800 py-2 rounded-lg border border-gray-300 hover:bg-gray-200 transition\"\n          >\n            Torna alle domande\n          </button>\n          <button\n            onClick={registerToday}\n            disabled={!allFilled}\n            className={\n              \"w-full sm:w-2/3 py-2 rounded-lg transition \" +\n              (allFilled\n                ? \"bg-yellow-500 text-white hover:bg-yellow-600\"\n                : \"bg-yellow-200 text-white cursor-not-allowed\")\n            }\n          >\n            Registra risposte\n          </button>\n        </div>\n\n        {savedToday && (\n          <div className=\"mt-6 bg-white rounded-2xl shadow-sm p-4 border border-gray-200\">\n            <p className=\"text-green-700 font-medium mb-3\">\n              ✅ Risposte registrate per {formatIT(selectedDate)}.\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-3\">\n              <button\n                onClick={() => setStep(\"history\")}\n                className=\"w-full sm:w-1/2 bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg transition\"\n              >\n                Il mio diario\n              </button>\n              <button\n                onClick={exportPDF}\n                className=\"w-full sm:w-1/2 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition\"\n              >\n                Esporta in PDF\n              </button>\n            </div>\n          </div>\n        )}\n      </Wrapper>\n    );\n  }\n\n  /* ========== STEP: Storico ========== */\n  if (step === \"history\") {\n    const dates = Object.keys(diary).sort((a, b) => (a < b ? 1 : -1));\n    return (\n      <Wrapper>\n        <div className=\"text-center mb-6\">\n          <h2 className=\"text-2xl font-bold text-gray-800\">Il mio diario</h2>\n        </div>\n\n        {dates.length === 0 ? (\n          <p className=\"text-center text-gray-500\">Non hai ancora registrato nulla.</p>\n        ) : (\n          <div className=\"flex flex-col gap-4\">\n            {dates.map((d) => (\n              <div key={d} className=\"bg-white rounded-2xl shadow-sm p-4 border border-gray-200\">\n                <p className=\"font-semibold text-gray-900 mb-2\">{formatIT(d)}</p>\n                {diary[d].answers.map((ans, i) => (\n                  <div key={i} className=\"mb-2\">\n                    <p className=\"italic text-gray-700 text-sm\">{questions[i]?.text}</p>\n                    <p className=\"text-gray-800 whitespace-pre-wrap\">{ans}</p>\n                  </div>\n                ))}\n                <div className=\"flex gap-3 mt-2\">\n                  <button\n                    onClick={() => {\n                      setSelectedDate(d);\n                      setAnswers(diary[d].answers);\n                      setSavedToday(true);\n                      setStep(\"review\");\n                    }}\n                    className=\"flex-1 bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded-lg transition\"\n                  >\n                    Apri e modifica\n                  </button>\n                  <button\n                    onClick={() => {\n                      setSelectedDate(d);\n                      setAnswers(diary[d].answers);\n                      exportPDF();\n                    }}\n                    className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition\"\n                  >\n                    PDF\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        <button\n          onClick={() => setStep(\"date\")}\n          className=\"w-full mt-6 bg-gray-100 text-gray-800 py-2 rounded-lg border border-gray-300 hover:bg-gray-200 transition\"\n        >\n          Torna alla data\n        </button>\n      </Wrapper>\n    );\n  }\n\n  return null;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}